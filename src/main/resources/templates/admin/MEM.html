<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원 관리</title>
  <style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        background-color: #f5f5f5;
    }
    .header {
        background-color: #4CAF50;
        color: white;
        text-align: center;
        padding: 20px;
        font-size: 24px;
        font-weight: bold;
    }
    .sidebar {
        width: 200px;
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        background-color: #f4f4f4;
        padding: 20px;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    .sidebar a {
        display: block;
        padding: 10px;
        color: #333;
        text-decoration: none;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
    }
    .sidebar a:hover {
        background-color: #ddd;
    }
    .content {
        margin-left: 220px;
        padding: 20px;
        display: none;
    }
    .content.active {
        display: block;
    }
    .section {
        max-width: 800px;
        margin: 0 auto;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .section h2 {
        margin-top: 0;
        font-size: 20px;
        color: #4CAF50;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }
    th, td {
        padding: 10px;
        border: 1px solid #ddd;
        text-align: center;
    }
    th {
        background-color: #4CAF50;
        color: white;
    }
    .search-container {
        margin-bottom: 20px;
        text-align: center;
    }
    .search-container input {
        width: 60%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    form label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
    form input, form select {
        width: 100%;
        padding: 10px;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    form button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
    }
    form button:hover {
        background-color: #45a049;
    }
    .back-button {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
    }
    .back-button:hover {
        background-color: #45a049;
    }
  </style>
</head>
<body>
<div class="header">회원 관리</div>
<div class="sidebar">
  <h3>메뉴</h3>
  <a href="#" onclick="showSection('memberCheck')">회원 조회</a>
  <a href="#" onclick="showSection('memberUpdate')">회원 상태 수정</a>
  <a href="#" onclick="showSection('orderDetails')">주문 내역</a>
</div>

<!-- 회원 조회 -->
<div id="memberCheck" class="content active">
  <div class="section">
    <h2>회원 조회</h2>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="회원 이름을 입력하세요..." oninput="filterMembers()">
    </div>
    <table>
      <thead>
      <tr>
        <th>회원 ID</th>
        <th>사용자 ID</th>
        <th>이름</th>
        <th>이메일</th>
        <th>연락처</th>
        <th>주소</th>
        <th>상태</th>
        <th>주문 내역</th>
      </tr>
      </thead>
      <tbody id="memberTableBody"></tbody>
    </table>
  </div>
</div>

<!-- 회원 상태 수정 -->
<div id="memberUpdate" class="content">
  <div class="section">
    <h2>회원 정보 확인 및 상태 변경</h2>
    <form id="memberForm">
      <label for="memberId">회원 ID:</label>
      <input type="text" id="memberId" name="memberId" readonly>
      <label for="userId">사용자 ID:</label>
      <input type="text" id="userId" name="userId" readonly>
      <label for="memberName">이름:</label>
      <input type="text" id="memberName" name="memberName" readonly>
      <label for="email">이메일:</label>
      <input type="email" id="email" name="email" readonly>
      <label for="contact">연락처:</label>
      <input type="text" id="contact" name="contact" readonly>
      <label for="address">주소:</label>
      <input type="text" id="address" name="address" readonly>
      <label for="status">상태:</label>
      <select id="status" name="status">
        <option value="활동 중">활동 중</option>
        <option value="정지">정지</option>
        <option value="탈퇴">탈퇴</option>
      </select>
      <button type="submit">상태 변경</button>
      <button type="button" id="cancelButton">취소</button>
    </form>
  </div>
</div>


<!-- 주문 내역 -->
<div id="orderDetails" class="content">
  <div class="section">
    <h2>주문 내역</h2>
    <table>
      <thead>
      <tr><th>상품명</th><th>수량</th><th>가격</th></tr>
      </thead>
      <tbody id="orderTableBody"></tbody>
    </table>
  </div>
</div>

<button class="back-button" onclick="goToAdminMain()">뒤로가기</button>

<script>
  const members = [];
  const orders = {};
  const itemsPerPage = 10;
  let currentPage = 1;

  for (let i = 1; i <= 50; i++) {
      members.push({
          id: `ID${i}`,
          userId: `user${i}`,
          name: `회원 ${i}`,
          email: `user${i}@example.com`,
          contact: `010-${String(i).padStart(4, '0')}-5678`,
          address: `서울시 구 ${i}`,
          status: i % 2 === 0 ? '활동 중' : '정지',
      });
      orders[`ID${i}`] = [
          { product: `상품 A${i}`, quantity: i, price: 1000 * i },
          { product: `상품 B${i}`, quantity: i + 1, price: 2000 * i }
      ];
  }

  function showSection(sectionId) {
      document.querySelectorAll('.content').forEach(section => section.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
  }

  function filterMembers() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      displayMembers(currentPage, query);
  }

  function displayMembers(page, filter = '') {
      currentPage = page;
      const filteredMembers = members.filter(member => member.name.toLowerCase().includes(filter));
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedMembers = filteredMembers.slice(startIndex, endIndex);

      const tableBody = document.getElementById('memberTableBody');
      tableBody.innerHTML = '';
      paginatedMembers.forEach(member => {
          const row = document.createElement('tr');
          row.innerHTML = `
              <td><a href="#" onclick="editMember('${member.id}')">${member.id}</a></td>
              <td>${member.userId}</td>
              <td>${member.name}</td>
              <td>${member.email}</td>
              <td>${member.contact}</td>
              <td>${member.address}</td>
              <td>${member.status}</td>
              <td><button onclick="viewOrders('${member.id}')">주문 내역 보기</button></td>
          `;
          tableBody.appendChild(row);
      });
  }

  function editMember(memberId) {
      const member = members.find(m => m.id === memberId);
      if (member) {
          // 회원 정보를 폼에 로드
          document.getElementById('memberId').value = member.id;
          document.getElementById('userId').value = member.userId;
          document.getElementById('memberName').value = member.name;
          document.getElementById('email').value = member.email;
          document.getElementById('contact').value = member.contact;
          document.getElementById('address').value = member.address;
          document.getElementById('status').value = member.status;

          // 'memberUpdate' 섹션 표시
          showSection('memberUpdate');
      }
  }

  function viewOrders(memberId) {
      const orderList = orders[memberId] || [];
      const tableBody = document.getElementById('orderTableBody');
      tableBody.innerHTML = '';
      orderList.forEach(order => {
          const row = document.createElement('tr');
          row.innerHTML = `<td>${order.product}</td><td>${order.quantity}</td><td>${order.price}원</td>`;
          tableBody.appendChild(row);
      });
      showSection('orderDetails');
  }

  document.getElementById('memberForm').addEventListener('submit', function (event) {
      event.preventDefault();

      const memberId = document.getElementById('memberId').value;
      const newStatus = document.getElementById('status').value;

      // 회원 데이터 업데이트
      const member = members.find(m => m.id === memberId);
      if (member) {
          const previousStatus = member.status;
          member.status = newStatus;

          // 알림 메시지 표시
          alert(`회원 ID: ${memberId}\n상태가 '${previousStatus}'에서 '${newStatus}'로 변경되었습니다.`);

          // 회원 목록 즉시 업데이트
          displayMembers(currentPage);
          showSection('memberCheck'); // 회원 조회로 돌아가기
      }
  });

  function displayMembers(page, filter = '') {
      currentPage = page;
      const filteredMembers = members.filter(member => member.name.toLowerCase().includes(filter));
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedMembers = filteredMembers.slice(startIndex, endIndex);

      const tableBody = document.getElementById('memberTableBody');
      tableBody.innerHTML = '';
      paginatedMembers.forEach(member => {
          const row = document.createElement('tr');
          row.innerHTML = `
              <td><a href="#" onclick="editMember('${member.id}')">${member.id}</a></td>
              <td>${member.userId}</td>
              <td>${member.name}</td>
              <td>${member.email}</td>
              <td>${member.contact}</td>
              <td>${member.address}</td>
              <td>${member.status}</td>
              <td><button onclick="viewOrders('${member.id}')">주문 내역 보기</button></td>
          `;
          tableBody.appendChild(row);
      });
  }

  document.getElementById('cancelButton').addEventListener('click', function () {
      // 입력 필드 초기화
      document.getElementById('memberId').value = '';
      document.getElementById('userId').value = '';
      document.getElementById('memberName').value = '';
      document.getElementById('email').value = '';
      document.getElementById('contact').value = '';
      document.getElementById('address').value = '';
      document.getElementById('status').value = '활동 중'; // 기본 상태로 설정

      // 회원 조회 화면으로 이동
      showSection('memberCheck');
  });


  function goToAdminMain() {
      window.location.href = 'adminmain';
  }

  document.addEventListener('DOMContentLoaded', () => {
      displayMembers(currentPage);
  });
</script>
</body>
</html>
